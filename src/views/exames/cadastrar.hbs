<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="/css/utils/global.css">
    <link rel="icon" href="/img/icon.png">
    <title>LGBM - Cadastrar Exame</title>
</head>

<body>
    {{>_menu}}
    <main>
        {{>_pesquisa}}
        <div class="warnings" id="warnings">

        </div>
        <form method="POST" id="formulario">
            <div class="form-group">
                <label for="nome">Nome</label>
                <input type="text" class="form-control" id="nome" name="nome" placeholder="Nome">
            </div>

            <div class="row">
                <div class="form-group col-md-4">
                    <label for="sigla">Sigla</label>
                    <input type="text" class="form-control" id="sigla" name="sigla" placeholder="Sigla">
                </div>

                <div class="form-group col-md-8">
                    <label for="tipo_analise">Tipo de Exame</label>
                    <select class="form-control" id="tipo_analise" name="tipo_analise">
                        <option>Análise Citológica</option>
                        <option>Análise Eletroforética</option>
                        <option>Análise Cromatográfica</option>
                        <option>Análise Molecular</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for=" metodo">Método</label>
                <input type="text" class="form-control" id="metodo" name="metodo" placeholder="Método">
            </div>

            <div class="row">
                <div class="form-group col-md-4">
                    <label for="preco">Preço (opcional)</label>
                    <input type="number" class="form-control" id="preco" name="preco" placeholder="Preço">
                </div>

                <div class="form-group col-md-4">
                    <label for="valor_ref">Valor de Referência</label>
                    <input type="text" class="form-control" id="valor_ref" name="valor_ref"
                        placeholder="Valor de Referência">
                </div>

                <div class="form-group col-md-4">
                    <label for="tipo_valor_ref">Tipo de Valor de Referência</label>
                    <select class="form-control" id="tipo_valor_ref" name="tipo_valor_ref">
                        <option>Numérico</option>
                        <option>Texto</option>
                        <option>Porcentagem</option>
                        <option>Booleano</option>
                        <option>Intervalo de valores</option>
                        <option>Idade</option>
                    </select>
                </div>
            </div>

            <div class="tab-ref-idade" style="display:none;">
                <h3 class="subsection" class="mt-4">Tabela de referências por idade</h3>
                <table class="table table-sm">
                    <thead>
                        <tr>
                            <th scope="col">Idade (mês)</th>
                            <th scope="col">Valor de Referência</th>
                            <th>Ação</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <tr>
                            <th>
                                <input type="text" class="form-control is-invalid" placeholder="Ex: 1-3" onkeyup="eventValidate(this)">
                            </th>
                            <th>
                                <input type="text" class="form-control"  placeholder="Ex: 58-84%">
                            </th>
                            <th>
                                <button type="button" class="btn btn-primary w-100" onclick='addRow()'>Adicionar</button>
                            </th>
                        </tr>
                    </tbody>
                </table>
                <small>*Por favor, coloque os valores em ordem cronológica.</small>
                <hr>
            </div>

            <div class="form-group">
                <label for="tipo_resultado">Tipo de Valor do Resultado</label>
                <select class="form-control" id="tipo_resultado" name="tipo_resultado">
                        <option>Possíveis Valores</option>
                        <option>Texto</option>
                        <option>Numérico</option>
                    </select>
            </div>

            <div class="form-group possiveis">
                <label for="possiveis_resultados">Possíveis Resultados</label>
                <textarea class="form-control" id="possiveis_resultados" rows="3"></textarea>
                <div class="possiveis_badges mt-1"></div>
                <small>*Separar os possíveis valores com Enter.</small>
            </div>

            <h3 class="subsection" class="mt-4">Informações</h3>

            <div class="form-group">
                <label for="observacao">Observações (caso necessário)</label>
                <textarea class="form-control" name="observacao" id="observacao" rows="3"></textarea>
            </div>

            <input type="hidden" name="cadastrado_por" value="{{user.nome}}">

            <button type="submit" class="btn active mt-4 w-100" id="submeter">Cadastrar Exame</button>
            <button type="reset" class="btn btn-secondary mt-3 w-100">Limpar</button>
        </form>
    </main>
</body>

<script src="/js/libs/jquery-3.5.1.min.js"></script>
<script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/bootstrap/js/bootstrap.min.js"></script>
<script src="/js/utils/global.js"></script>
<script src="/js/exames/cadastrar-exame.js"></script>